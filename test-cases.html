<!doctype html>
<!-- - - - - - - - -->
<!--  dna.js       -->
<!--  Test Cases   -->
<!-- - - - - - - - -->
<html>
<head>
<meta charset=utf-8>
<title>dna.js &bull; Test Cases</title>
<style>
   body           { font-family: sans-serif; margin: 30px; }
   h1, h3         { margin: 0px 0px 5px 0px; }
   h2             { margin: 0px; }
   p              { margin: 0px; }
   #mode          { display: inline-block; width: 75px; }
   .push-right    { float: right; }
   .test-case     { display: inline-block; vertical-align: top; border: 1px solid silver; padding: 10px; margin: 0px 20px 20px 0px; }
   fieldset       { float: left; width: 200px; border: 1px solid silver; }
   legend         { border: 1px solid silver; padding: 0px 10px; }
   .result        { clear: both; padding-top: 10px; }
   .dna-template  { display: none; }
   .dna-clone     { background-color: darkseagreen; padding: 10px; margin-bottom: 15px; }
   .dna-clone img { width: 120px; }
   .color-change  { background-color: lightsteelblue; }
   .color-change2 { background-color: gold; }
   .border-change { border: 2px solid darkorange; }
</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>
var dna =    '<script src=dna.js>';
var dnaMin = '<script src=dna.min.js>';
$('head').append($(location.search == '?min' ? dnaMin : dna ));
</script>
</head>
<body>
<div class=push-right>
   <a href="http://dnajs.org/">dnajs.org</a>
</div>
<h1>dna.js Template Cloner</h1>
<h2>Test Cases</h2>
<p><span id=mode></span> &mdash; <a id=switch href="test-cases.html">switch</a></p>
<br>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class=test-case>
   <h3>Test Case: #01</h3>
   <p>Add 2 items</p>
   <fieldset>
		<legend>Actual</legend>
		<div class=book-list>
			<div id=t01-book class=dna-template>
				<div>Title:  <span>~~title~~</span></div>
				<div>Author: <span>~~author~~</span></div>
			</div>
		</div>
   </fieldset>
   <fieldset>
      <legend>Expected</legend>
		<div class=book-list>
			<div class=dna-clone>
				<div>Title:  <span>The DOM</span></div>
				<div>Author: <span>Jan</span></div>
			</div>
			<div class=dna-clone>
				<div>Title:  <span>Howdy HTML5</span></div>
				<div>Author: <span>Ed</span></div>
			</div>
		</div>

   </fieldset>
   <p class=result>Result:<br>2 items</b></b></p>
</div>
<script>
$(function() {
   var book1 = { title: 'The DOM',     author: 'Jan' };
   var book2 = { title: 'Howdy HTML5', author: 'Ed' };
   dna.clone('t01-book', book1);
   dna.clone('t01-book', book2);
   });
</script>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class=test-case>
   <h3>Test Case: #02</h3>
   <p>Add 2 items, empty, and add 1 item (with mustache)</p>
   <fieldset>
		<legend>Actual</legend>
		<div class=book-list>
			<div id="t02-book" class="dna-template">
				<div data-dna-add-class="c">Title: <span>{{title}}</span></div>
				<div data-dna-add-class=c>Author: <span>{{author}}</span></div>
			</div>
		</div>
   </fieldset>
   <fieldset>
      <legend>Expected</legend>
		<div class=book-list>
			<div class=dna-clone>
				<div class=color-change>Title: <span>The One</span></div>
				<div class=color-change>Author: <span>Lee</span></div>
			</div>
		</div>
   </fieldset>
   <p class=result>Result:<br>1 item with blue core</b></b></p>
</div>
<script>
$(function() {
   var book1 = { title: 'The DOM',     author: 'Jan' };
   var book2 = { title: 'Howdy HTML5', author: 'Ed' };
   var book3 = { title: 'The One',     author: 'Lee', c: 'color-change' };
   dna.clone('t02-book', [book1, book2]);
   dna.empty('t02-book');
   dna.clone('t02-book', book3);
   });
</script>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class=test-case>
   <h3>Test Case: #03</h3>
   <p>Add 3 items with fade (1st one blue) and top set to true</p>
   <fieldset>
		<legend>Actual</legend>
		<div class=book-list>
			<div id=t03-book class=dna-template>
				<div>Title:  <span>~~title~~</span></div>
				<div>Author: <span>~~author~~</span></div>
			</div>
		</div>
   </fieldset>
   <fieldset>
      <legend>Expected</legend>
		<div class=book-list>
			<div class=dna-clone>
				<div>Title:  <span>3rd</span></div>
				<div>Author: <span>Jan</span></div>
			</div>
			<div class=dna-clone>
				<div>Title:  <span>2nd</span></div>
				<div>Author: <span>Jan</span></div>
			</div>
			<div class="dna-clone color-change">
				<div>Title:  <span>1<sup>st</sup> &bull;</span></div>
				<div>Author: <span>Jan</span></div>
			</div>
		</div>
   </fieldset>
   <p class=result>Result:<br>3 faded items with #3 on top</b></b></p>
</div>
<script>
$(function() {
   var book1 = { title: '1<sup>st</sup> &bull;', author: 'Jan' };
   var book2 = { title: '2nd', author: 'Jan' };
   var book3 = { title: '3rd', author: 'Jan' };
   var options = { fade: true, top: true, html: true };
   dna.clone('t03-book', book1, options).addClass('color-change');
   dna.clone('t03-book', book2, options);
   dna.clone('t03-book', book3, options);
   });
</script>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class=test-case>
   <h3>Test Case: #04</h3>
   <p>Add 1 items with an image</p>
   <fieldset>
		<legend>Actual</legend>
		<div class=book-list>
			<div id=t04-book class=dna-template>
				<div>Title:  <span>~~title~~</span></div>
				<div>Author: <span>~~author~~</span></div>
				<div>Cover: <img data-dna-attr-src=~~image~~ src="" alt="Cover"></div>
			</div>
		</div>
   </fieldset>
   <fieldset>
      <legend>Expected</legend>
		<div class=book-list>
			<div class=dna-clone>
				<div>Title:  <span>&lt;b&gt;Text&lt;/b&gt;&amp;bull;</span></div>
				<div>Author: <span>Lee</span></div>
				<div>Cover: <img src="http://dnajs.org/graphics/dnajs-logo.png" alt="Cover"></div>
			</div>
		</div>
   </fieldset>
   <p class=result>Result:<br>1 item with an image</b></b></p>
</div>
<script>
$(function() {
   var book = { title: '<b>Text</b>&bull;', author: 'Lee', image: 'http://dnajs.org/graphics/dnajs-logo.png' };
   dna.clone('t04-book', book);
   });
</script>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class=test-case>
   <h3>Test Case: #05</h3>
   <p>Add 2 items in an array twice</p>
   <fieldset>
		<legend>Actual</legend>
		<div class=book-list>
			<div id=t05-book class=dna-template>
				<div>Title:  <span>~~title~~</span></div>
				<div>Author: <span>~~author~~</span></div>
			</div>
		</div>
   </fieldset>
   <fieldset>
      <legend>Expected</legend>
		<div class=book-list>
			<div class=dna-clone>
				<div>Title:  <span>1st</span></div>
				<div>Author: <span>Lee</span></div>
			</div>
			<div class=dna-clone>
				<div>Title:  <span>2st</span></div>
				<div>Author: <span>Jan</span></div>
			</div>
			<div class="dna-clone color-change">
				<div>Title:  <span>1st</span></div>
				<div>Author: <span>Lee</span></div>
			</div>
			<div class="dna-clone color-change">
				<div>Title:  <span>2st</span></div>
				<div>Author: <span>Jan</span></div>
			</div>
		</div>
   </fieldset>
   </fieldset>
   <p class=result>Result:<br>4 items (last 2 blue)</b></b></p>
</div>
<script>
$(function() {
   var book1 = { title: '1st', author: 'Lee' };
   var book2 = { title: '2nd', author: 'Jan' };
   dna.clone('t05-book', [book1, book2]).addClass('color-change');
   dna.clone('t05-book', [book1, book2], { empty: true });
   dna.clone('t05-book', [book1, book2]).addClass('color-change');
   });
</script>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class=test-case>
   <h3>Test Case: #06</h3>
   <p>Add 1 item with attributes</p>
   <fieldset>
		<legend>Actual</legend>
		<div class=book-list>
			<div id=t06-book class=dna-template data-dna-add-class=c>
				<div id=~~info.isbn~~>
					Title: <span lang=~~language~~ class=~~language~~>~~title~~</span>
			  </div>
			</div>
		</div>
   </fieldset>
   <fieldset>
      <legend>Expected</legend>
		<div class=book-list>
			<div class="dna-clone border-change">
				<div id=123 class=color-change>
					Title: <span lang=fr class="fr color-change2">Les Attributs</span>
			  </div>
			</div>
		</div>
   </fieldset>
   <p class=result>Result:<br>1 item with "class=border-change" (orange),<br>
      "id=123" (blue), and "lang=fr" (gold)</b></b></p>
</div>
<script>
$(function() {
   var bouquin = { title: 'Les Attributs', info: { isbn: 123 }, language: 'fr', c: 'border-change' };
   dna.clone('t06-book', bouquin);
   $('#123').addClass('color-change').find('[lang=fr]').addClass('color-change2');
   });
</script>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class=test-case>
   <h3>Test Case: #07</h3>
   <p>Sub-template with array of data</p>
   <fieldset>
		<legend>Actual</legend>
		<div class=book-list>
			<div id=t07-book class=dna-template>
				<div>Author: <span>~~author.name~~</span></div>
				<div>
					<div id=t07-book-chapter class=dna-template>
						<div>Chapter: <span>~~header~~</span><span>~~author.name~~</span></div>
					</div>
				</div>
			</div>
		</div>
   </fieldset>
   <fieldset>
      <legend>Expected</legend>
		<div class=book-list>
			<div class=dna-clone>
				<div>Author: <span>Ed</span></div>
				<div>
				</div>
			</div>
			<div class=dna-clone>
				<div>Author: <span>Jan</span></div>
				<div>
					<div class="dna-clone color-change">
						<div>Chapter: <span>Preface</span><span></span></div>
						<div></div>
					</div>
					<div class="dna-clone color-change">
						<div class=color-change>Chapter: <span>Index</span><span></span></div>
					</div>
				</div>
			</div>
			<div class=dna-clone>
				<div>Author: <span>Lee</span></div>
				<div>
				</div>
			</div>
		</div>
   </fieldset>
   <p class=result>Result:<br>3 items with the middle having 2 sub-items in blue</b></b></p>
</div>
<script>
$(function() {
   var book1 = { author: { name: 'Ed' } };
   var book2 = { author: { name: 'Jan' } };
   var book3 = { author: { name: 'Lee' } };
   dna.clone('t07-book', book1);
   var clone = dna.clone('t07-book', book2);
   var chapters = [{ header: 'Preface' }, { header: 'Index' }]
   dna.clone('t07-book-chapter', chapters, { holder: clone }).addClass('color-change');;
   dna.clone('t07-book', book3);
   });
</script>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class=test-case>
   <h3>Test Case: #08</h3>
   <p>Add 2 items and mutate</p>
   <fieldset>
		<legend>Actual</legend>
		<div class=book-list>
			<div id=t08-book class=dna-template>
				<div>Title:  <span>~~title~~</span></div>
				<div>Author: <span>~~author~~</span></div>
			</div>
		</div>
   </fieldset>
   <fieldset>
      <legend>Expected</legend>
		<div class=book-list>
			<div class=dna-clone>
				<div>Title:  <span>The New DOM</span></div>
				<div>Author: <span>Jan II</span></div>
			</div>
			<div class=dna-clone>
				<div>Title:  <span>Howdy HTML5</span></div>
				<div>Author: <span>Ed II</span></div>
			</div>
		</div>
   </fieldset>
   <p class=result>Result:<br>item 1 with all new data and item 2 with new author</b></b></p>
</div>
<script>
$(function() {
   var book1 = { title: 'The DOM',     author: 'Jan' };
   var book2 = { title: 'The New DOM', author: 'Jan II' };
   var book3 = { title: 'Howdy HTML5', author: 'Ed' };
   var clone;
   clone = dna.clone('t08-book', book1);
   dna.mutate(clone, book2);
   clone = dna.clone('t08-book', book3);
   dna.mutate(clone, { author: 'Ed II' });
   });
</script>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class=test-case>
   <h3>Test Case: #09</h3>
   <p>Add 2 items loaded from REST call</p>
   <fieldset>
		<legend>Actual</legend>
		<div class=book-list>
			<div id=t09-book class=dna-template>
				<div>Title:  <span>~~title~~</span></div>
				<div>Author: <span>~~author~~</span></div>
			</div>
		</div>
   </fieldset>
   <fieldset>
      <legend>Expected</legend>
		<div class=book-list>
			<div class=dna-clone>
				<div>Title:  <span>Go JavaScript</span></div>
				<div>Author: <span>Jake</span></div>
			</div>
			<div class=dna-clone>
				<div>Title:  <span>Styling CSS3</span></div>
				<div>Author: <span>Abby</span></div>
			</div>
		</div>
   </fieldset>
   <p class=result>Result:<br>2 items &rarr;</b>
      <a href="http://dnajs.org/rest/book/1" onclick="this.target='_target';">book 1</a> &amp;
      <a href="http://dnajs.org/rest/book/2" onclick="this.target='_target';">book 2</a>
   </b></p>
</div>
<script>
$(function() {
   dna.load('t09-book', 'http://dnajs.org/rest/book/1');
   dna.load('t09-book', 'http://dnajs.org/rest/book/2');
   dna.load('t09-book', 'http://dnajs.org/rest/book/7');  //test call to missing resource
   });
</script>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class=test-case>
   <h3>Test Case: #10</h3>
   <p>Add 1 item and apply task function</p>
   <fieldset>
		<legend>Actual</legend>
		<div class=book-list>
			<div id=t10-book class=dna-template>
				<div>~~title~~</div>
			</div>
		</div>
   </fieldset>
   <fieldset>
      <legend>Expected</legend>
		<div class=book-list>
			<div class=dna-clone
					style="height: 60px; color: white; background-image: url(http://dnajs.org/graphics/dnajs-logo.png); background-size: 80px;">
				<div>Background</div>
			</div>
		</div>
   </fieldset>
   <p class=result>Result:<br>1 item with a fade in background</b></b></p>
</div>
<script>
$(function() {
   var applyBackgnd = function(elem, data) {
      elem.css({ height: '60px', color: 'white',
         'background-image': data.image, 'background-size': '80px' });
      };
   var book = { title: 'Background', image: 'url(http://dnajs.org/graphics/dnajs-logo.png)' };
   var options = { fade: true, task: applyBackgnd };
   dna.clone('t10-book', book, options);
   });
</script>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class=test-case>
   <h3>Test Case: #11</h3>
   <p>Add 2 items with missing fields</p>
   <fieldset>
		<legend>Actual</legend>
		<div class=book-list>
			<div id=t11-book class=dna-template>
				<div>Title:
					<span data-dna-require=title>~~title~~</span>
					<span data-dna-missing=title><i>[Gone with the Wind]</i></span>
				</div>
				<div data-dna-require=author>Author: <span>~~author~~</span></div>
				<div data-dna-missing=author><i>[no author]</i></div>
			</div>
		</div>
   </fieldset>
   <fieldset>
      <legend>Expected</legend>
		<div class=book-list>
			<div class=dna-clone>
				<div>Title:
					<span data-dna-missing=title><i>[Gone with the Wind]</i></span>
				</div>
				<div data-dna-require=author>Author: <span>Jan</span></div>
			</div>
			<div class=dna-clone>
				<div>Title:
					<span data-dna-require=title>Howdy HTML5</span>
				</div>
				<div data-dna-missing=author><i>[no author]</i></div>
			</div>
		</div>
   </fieldset>
   <p class=result>Result:<br>Item 1 missing title and item 2 missing author</b></b></p>
</div>
<script>
$(function() {
   var book1 = { author: 'Jan' };
   var book2 = { title: 'Howdy HTML5' };
   dna.clone('t11-book', book1);
   dna.clone('t11-book', book2);
   });
</script>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class=test-case>
   <h3>Test Case: #12</h3>
   <p>Array field (nested template)</p>
   <fieldset>
		<legend>Actual</legend>
		<div class=book-list>
			<div id=t12-book class=dna-template>
				<div>Title: <span>~~title~~</span></div>
				<div class=color-change data-dna-array=chapters>Chapter: <span>~~header~~</span></div>
			</div>
		</div>
   </fieldset>
   <fieldset>
      <legend>Expected</legend>
		<div class=book-list>
			<div class=dna-clone>
				<div>Title:  <span>The DOM</span></div>
			</div>
			<div class=dna-clone>
				<div>Title:  <span>Howdy HTML5</span></div>
				<div class="dna-clone color-change">Chapter: <span>Preface</span></div>
				<div class="dna-clone color-change">Chapter: <span>Index</span></div>
			</div>
			<div class=dna-clone>
				<div>Title:  <span>Styling CSS3</span></div>
			</div>
		</div>
   </fieldset>
   <p class=result>Result:<br>3 items with item 2 containing 2 chapters</b></b></p>
</div>
<script>
$(function() {
   var book1 = { title: 'The DOM' };
   var book2 = { title: 'Howdy HTML5',  chapters: [{ header: 'Preface' }, { header: 'Index' }] };
   var book3 = { title: 'Styling CSS3', chapters: [] };
   dna.clone('t12-book', [book1, book2, book3]);
   });
</script>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<script>
$(function() {
   var mode = $('head script[src^=dna]').attr('src');
   $('#mode').text(mode);
   if (mode == 'dna.js')
      $('#switch').attr('href', '?min');
   dna.debug();
   });
</script>
</body>
</html>
